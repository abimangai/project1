<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BSS products</title>
    <link rel="icon" href="/FRONTEND/images/crystal_delta_logo-icon.png" />
    <link rel="stylesheet" href="/FRONTEND/products.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,700;1,200&display=swap"
      rel="stylesheet"
    />
  </head>
  <body style="padding-bottom: 100px; font-family: 'Poppins', sans-serif">
    <div class="container">
      <div class="navbar">
        <div class="logo">
          <a href="/FRONTEND/HTML_Pages/products.html">
            <img
              src="/FRONTEND/images/crystal_delta_logo.jpg"
              width="50px"
              alt=""
            />
            <img src="/FRONTEND/images/" alt="">
          </a>
        </div>
        <nav>
         
          <a href="/FRONTEND/HTML_Pages/sell.html">
            <button class="sell-btn">
              Sell
            </button>
          </a>
          <a href="/FRONTEND/HTML_Pages/account.html">
            <button class="account-btn">
              Account
            </button>
          </a>
          <a href="/FRONTEND/HTML_Pages/index.html">
            <button class="logout-btn">
              Logout
            </button>
          </a>
        </nav>
      </div>
      <hr />
      <div>
        <ul class="menu-item">
          <a href=""><il>All</il><hr></a>
          <a href=""><il>Car</il></a>
          <a href=""><il>Furniture</il></a>
          <a href=""><il>Motorcycle</il></a>
          <a href=""><il>Mobile</il></a>
          <a href=""><il>Tv</il></a>
          <a href=""><il>kitchen appliances</il></a>
          <a href=""> <il>Computer & Laptops</il></a>
          <a href=""> <il>Home appliances </il></a>
          <a href=""> <il>Games & Entertainments</il></a>
        </ul>
      </div>
      <hr />
      <div class="head-of-page">
        <div>
          <h1>
            <span class="b-s">BUY</span> the
            <span class="product-font">Product</span> for you! <br />
            <span class="b-s"> SELL</span> your
            <span class="product-font">Product!</span>
          </h1>
        </div>
        <div>
          <img src="/FRONTEND/images/mobileProduct.jpeg" width="100px" />
        </div>
      </div>
      <hr />
      <h3>All products</h3>
      <div class="product-list" id="products-container"></div>
    </div>

    <script>
      // Fetch and display products from the API
      fetch("http://localhost:2403/products")
        .then((response) => response.json())
        .then((products) => {
          const productsContainer =
            document.getElementById("products-container");

          products.forEach((product) => {
            const productCard = document.createElement("div");
            productCard.className = "grid";

            // Create anchor tag for product details page
            const productLink = document.createElement("a");
            productLink.href = `productDetails.html?id=${product.id}`;
            console.log(`${product.id}`);
            console.log(`${product.title}`);
            const productImage = document.createElement("img");
            productImage.src = `${product.photo_url}`;
            productImage.alt = product.title;

            const productTitle = document.createElement("span");
            productTitle.textContent = product.title;
            productTitle.className = "products-font";
            const productPrice = document.createElement("span");
            productPrice.textContent = `Price: $${product.price}`;
            productPrice.className = "product-price";

            const productDescription = document.createElement("span");
            productDescription.textContent = product.description;
            productDescription.className = "product-description";

            const productButton = document.createElement("button");
            productButton.textContent = "Buy Product";
            productButton.className="buy-button";



            // Append elements to the anchor tag
            productButton.addEventListener("click", () => {
           window.location.href =` productDetails.html?id=${product.id}`;
            });
            productLink.appendChild(productImage);
            productCard.appendChild(productLink);
            productCard.appendChild(productTitle);
            productCard.appendChild(productPrice);
            productCard.appendChild(productDescription);
            productCard.appendChild(productButton);
            productsContainer.appendChild(productCard);
          });
        })
        .catch((error) => console.error("Error fetching products:", error));
    </script>
  </body>
</html>
